@if (pictureResponse.hasValue()) {
  @let picture = pictureResponse.value();

  <section class="content">
    <div class="image-block">
      <img ngSrc="{{ picture.imageLink }}" alt="{{ picture.title }}" fill priority />
    </div>
    <div class="details-block">
      <h1 class="title">{{ picture.title }}</h1>
      <p class="description">{{ picture.description }}</p>
      <p class="likes">
        <button matButton class="btn-like" (click)="toggleLikePicture()">
          @if (isAlreadyLiked()) {
            <mat-icon fontIcon="favorite" aria-label="ne plus aimer l'image"></mat-icon>
          } @else {
            <mat-icon fontIcon="favorite_outline" aria-label="aimer l'image"></mat-icon>
          }
          <span>
            @if (picture.likes.length > 0) {
              ({{ picture.likes.length }})
            } @else {
              Soyez la première personne à aimer cette image!
            }
          </span>
        </button>
      </p>

      <p>Postée le {{ picture.createdAt | date: 'd MMMM y à H:mm' }} par
        <a
            [routerLink]="['/user', picture.author.id, 'pictures']"
            [queryParams]="{author: picture.author.displayName}"
            class="author-link"
        >{{ picture.author.displayName }}</a>
      </p>

    </div>
  </section>

  <section class="comments-block">
    <h2>Commentaires ({{ commentsResponse.value()?.length || 0 }})</h2>

    @if (commentsResponse.hasValue()) {
      <app-comment-list [commentsList]="commentsResponse.value()"></app-comment-list>
      <!--<div class="form">-->
          <!--  <h3>Écrivez votre commentaire :</h3>-->
          <!--  <p>(Bientôt disponible)</p>-->
          <!--</div>-->
    } @else if (commentsResponse.isLoading()) {
      <p>Chargement des commentaires...</p>
    } @else {
      <p>Impossible de récupérer les commentaires de cette. Veuillez recharger votre page.</p>
    }
  </section>
} @else if (pictureResponse.isLoading()) {
  <mat-spinner></mat-spinner>
} @else {
  <section class="section-error">
    <p class="error">Impossible de récupérer l'image en question. Veuillez réessayer.</p>
  </section>
}